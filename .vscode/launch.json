{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Train MV2D",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/tools/train.py",
            "args": [
                "configs/mv2d/exp/mv2d_r50_frcnn_single_frame_roi_1408x512_ep24.py"
            ],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "env": {
                "PYTHONPATH": "${workspaceFolder}:${env:PYTHONPATH}"}
        },
        {
            "name": "Python: Train MV2D Moon",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/tools/train.py",
            "args": [
                "configs/mv2d/exp/mv2d_r50_frcnn_single_frame_roi_1408x512_ep24_moon.py"
            ],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "env": {
                "PYTHONPATH": "${workspaceFolder}${pathSeparator}${env:PYTHONPATH}",
                "CUDA_VISIBLE_DEVICES": "0"  // 여기서 CUDA 장치 번호를 설정합니다.

            },
            "justMyCode": false
        },
        {
            "name": "Python: Train MV2D Moon with torchrun",
            "type": "python",
            "request": "launch",
            "module": "torch.distributed.run",
            "args": [
                "--nproc_per_node=2",
                "--master_port=29500",
                "${workspaceFolder}/tools/train.py",
                "configs/mv2d/exp/mv2d_r50_frcnn_single_frame_roi_1408x512_ep24_moon.py",
                "--cfg-options",
                "optimizer.accumulate_grad_batches=4",  // Gradient Accumulation 적용
                "fp16.enabled=True"  // Mixed Precision Training 활성화
            ],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "env": {
                "PYTHONPATH": "${workspaceFolder}${pathSeparator}${env:PYTHONPATH}",
                "CUDA_VISIBLE_DEVICES": "2,3"
            },
            "justMyCode": false
        },
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "cwd": "${fileDirname}"
        }
    ]
    
    
}
